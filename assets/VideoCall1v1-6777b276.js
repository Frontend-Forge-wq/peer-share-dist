import{r as c,j as t,a as r}from"./index-2f2e5893.js";import{T as h}from"./TutorialPeer-9374b14b.js";import"./WSClient-4a6f9690.js";function y(){const[i,o]=c.useState("room-100"),[u,d]=c.useState("idle"),a=c.useRef(null),n=c.useRef(null),s=c.useRef(null);return c.useEffect(()=>()=>{var e;return(e=s.current)==null?void 0:e.hangup()},[]),t("div",{className:"page",children:r("div",{className:"grid two",children:[r("div",{className:"card",children:[t("div",{className:"card-title",children:"1v1 视频通话"}),t("div",{className:"card-body",children:r("div",{className:"row gap",children:[t("input",{className:"input",value:i,onChange:e=>o(e.target.value),"aria-label":"房间ID"}),t("button",{className:"btn",onClick:async()=>{const e=new h({roomId:i,polite:!0});e.onStatus=l=>d(`${l.pcState}/${l.dcState}`),e.onRemoteStream=l=>{n.current&&(n.current.srcObject=l)},await e.connect();const m=await e.startLocalMedia({audio:!0,video:!0});a.current&&(a.current.srcObject=m,a.current.muted=!0),s.current=e},children:"连接"}),t("button",{className:"btn",onClick:async()=>{var e;await((e=s.current)==null?void 0:e.call())},children:"呼叫"}),t("button",{className:"btn",onClick:()=>{var e;(e=s.current)==null||e.hangup(),a.current&&(a.current.srcObject=null),n.current&&(n.current.srcObject=null)},children:"挂断"}),r("span",{className:"chip",children:[t("span",{className:"dot"}),u]})]})})]}),r("div",{className:"card",children:[t("div",{className:"card-title",children:"视频"}),t("div",{className:"card-body",children:r("div",{className:"grid two",children:[t("video",{ref:a,playsInline:!0,autoPlay:!0,style:{width:"100%",borderRadius:8}}),t("video",{ref:n,playsInline:!0,autoPlay:!0,style:{width:"100%",borderRadius:8}})]})})]})]})})}export{y as default};
