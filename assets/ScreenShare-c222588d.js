import{r as c,j as t,a as s}from"./index-30a93734.js";import{T as h}from"./TutorialPeer-87271097.js";import"./WSClient-c3269280.js";function S(){const[o,d]=c.useState("ss-room"),[u,m]=c.useState("idle"),r=c.useRef(null),i=c.useRef(null),n=c.useRef(null);return c.useEffect(()=>()=>{var e;return(e=n.current)==null?void 0:e.hangup()},[]),t("div",{className:"page",children:s("div",{className:"grid two",children:[s("div",{className:"card",children:[t("div",{className:"card-title",children:"屏幕共享"}),t("div",{className:"card-body",children:s("div",{className:"row gap",children:[t("input",{className:"input",value:o,onChange:e=>d(e.target.value),"aria-label":"房间ID"}),t("button",{className:"btn",onClick:async()=>{const e=new h({roomId:o,polite:!0});e.onStatus=a=>m(`${a.pcState}/${a.dcState}`),e.onRemoteStream=a=>{i.current&&(i.current.srcObject=a)},await e.connect();const l=await e.startLocalMedia({audio:!0,video:!0});r.current&&(r.current.srcObject=l,r.current.muted=!0),n.current=e},children:"连接"}),t("button",{className:"btn",onClick:async()=>{var l,a;const e=await((l=n.current)==null?void 0:l.startScreenShare());r.current&&e&&(r.current.srcObject=e),await((a=n.current)==null?void 0:a.call())},children:"共享屏幕"}),t("button",{className:"btn",onClick:()=>{var e;return(e=n.current)==null?void 0:e.hangup()},children:"挂断"}),s("span",{className:"chip",children:[t("span",{className:"dot"}),u]})]})})]}),s("div",{className:"card",children:[t("div",{className:"card-title",children:"预览"}),t("div",{className:"card-body",children:s("div",{className:"grid two",children:[t("video",{ref:r,playsInline:!0,autoPlay:!0,style:{width:"100%",borderRadius:8}}),t("video",{ref:i,playsInline:!0,autoPlay:!0,style:{width:"100%",borderRadius:8}})]})})]})]})})}export{S as default};
