import{r as c,j as t,a as n}from"./index-2f2e5893.js";import{T as h}from"./TutorialPeer-9374b14b.js";import"./WSClient-4a6f9690.js";function S(){const[u,o]=c.useState("ss-room"),[d,m]=c.useState("idle"),r=c.useRef(null),s=c.useRef(null),l=c.useRef(null);return c.useEffect(()=>()=>{var e;return(e=l.current)==null?void 0:e.hangup()},[]),t("div",{className:"page",children:n("div",{className:"grid two",children:[n("div",{className:"card",children:[t("div",{className:"card-title",children:"屏幕共享"}),t("div",{className:"card-body",children:n("div",{className:"row gap",children:[t("input",{className:"input",value:u,onChange:e=>o(e.target.value),"aria-label":"房间ID"}),t("button",{className:"btn",onClick:async()=>{const e=new h({roomId:u,polite:!0});e.onStatus=a=>m(`${a.pcState}/${a.dcState}`),e.onRemoteStream=a=>{s.current&&(s.current.srcObject=a)},await e.connect();const i=await e.startLocalMedia({audio:!0,video:!0});r.current&&(r.current.srcObject=i,r.current.muted=!0),l.current=e},children:"连接"}),t("button",{className:"btn",onClick:async()=>{var i,a;const e=await((i=l.current)==null?void 0:i.startScreenShare());r.current&&e&&(r.current.srcObject=e),await((a=l.current)==null?void 0:a.call())},children:"共享屏幕"}),t("button",{className:"btn",onClick:()=>{var e;(e=l.current)==null||e.hangup(),r.current&&(r.current.srcObject=null),s.current&&(s.current.srcObject=null)},children:"挂断"}),n("span",{className:"chip",children:[t("span",{className:"dot"}),d]})]})})]}),n("div",{className:"card",children:[t("div",{className:"card-title",children:"预览"}),t("div",{className:"card-body",children:n("div",{className:"grid two",children:[t("video",{ref:r,playsInline:!0,autoPlay:!0,style:{width:"100%",borderRadius:8}}),t("video",{ref:s,playsInline:!0,autoPlay:!0,style:{width:"100%",borderRadius:8}})]})})]})]})})}export{S as default};
