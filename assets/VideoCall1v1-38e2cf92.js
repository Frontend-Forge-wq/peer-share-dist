import{r as t,j as a,a as c}from"./index-30a93734.js";import{T as h}from"./TutorialPeer-87271097.js";import"./WSClient-c3269280.js";function y(){const[i,o]=t.useState("room-100"),[d,u]=t.useState("idle"),r=t.useRef(null),l=t.useRef(null),s=t.useRef(null);return t.useEffect(()=>()=>{var e;return(e=s.current)==null?void 0:e.hangup()},[]),a("div",{className:"page",children:c("div",{className:"grid two",children:[c("div",{className:"card",children:[a("div",{className:"card-title",children:"1v1 视频通话"}),a("div",{className:"card-body",children:c("div",{className:"row gap",children:[a("input",{className:"input",value:i,onChange:e=>o(e.target.value),"aria-label":"房间ID"}),a("button",{className:"btn",onClick:async()=>{const e=new h({roomId:i,polite:!0});e.onStatus=n=>u(`${n.pcState}/${n.dcState}`),e.onRemoteStream=n=>{l.current&&(l.current.srcObject=n)},await e.connect();const m=await e.startLocalMedia({audio:!0,video:!0});r.current&&(r.current.srcObject=m,r.current.muted=!0),s.current=e},children:"连接"}),a("button",{className:"btn",onClick:async()=>{var e;await((e=s.current)==null?void 0:e.call())},children:"呼叫"}),a("button",{className:"btn",onClick:()=>{var e;(e=s.current)==null||e.hangup()},children:"挂断"}),c("span",{className:"chip",children:[a("span",{className:"dot"}),d]})]})})]}),c("div",{className:"card",children:[a("div",{className:"card-title",children:"视频"}),a("div",{className:"card-body",children:c("div",{className:"grid two",children:[a("video",{ref:r,playsInline:!0,autoPlay:!0,style:{width:"100%",borderRadius:8}}),a("video",{ref:l,playsInline:!0,autoPlay:!0,style:{width:"100%",borderRadius:8}})]})})]})]})})}export{y as default};
